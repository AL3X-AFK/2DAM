CREATE OR REPLACE TYPE direccion as OBJECT(
calle VARCHAR2(25),
ciudad VARCHAR2(20),
codigo_post NUMBER(5));
/

CREATE OR REPLACE TYPE persona as OBJECT(
codigo NUMBER,
nombre VARCHAR2(35),
direc direccion,
fecha_nac DATE);
/

DECLARE
DIR DIRECCION:= DIRECCION (NULL,NULL,NULL);
P PERSONA := PERSONA(NULL,NULL,NULL,NULL);

BEGIN
DIR.CALLE := 'La Mina, 3';
DIR.CIUDAD := 'Guadalajara';
DIR.CODIGO_POST := 19001;
P.CODIGO := 1;
P.NOMBRE := 'JUAN';
P.DIREC := DIR;
P.FECHA_NAC := '10/11/1998';

INSERT INTO ALUMNOS VALUES(P);
END;
/

CREATE TABLE ALUMNOS OF PERSONA(
CODIGO PRIMARY KEY);

INSERT INTO ALUMNOS VALUES(1, 'Juan Perez', DIRECCION('C/Lopez, 4', 'Guadalajara', 19005), '18/12/1990' );

INSERT INTO ALUMNOS VALUES(2, 'Flor Gonzalez', DIRECCION('C/Fermin, 42', 'Madrid', 28280), '15/03/1979' );


SELECT * FROM ALUMNOS A WHERE A.DIREC.CIUDAD = 'Guadalajara';

SELECT CODIGO, A.DIREC FROM ALUMNOS A;

UPDATE ALUMNOS A SET A.DIREC.CIUDAD = LOWER(A.DIREC.CIUDAD) WHERE A.DIREC.CIUDAD = 'Guadalajara';

SELECT A.NOMBRE, A.DIRECCION.CIUDAD FROM ALUMNOS A

DELETE FROM ALUMNOS A WHERE A.DIREC.CIUDAD = 'guadalajara';

